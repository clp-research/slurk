

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>5. Layouts and Plugins &mdash; slurk 2.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Security and Permissions" href="slurk_permission.html" />
    <link rel="prev" title="4. Pairing up participants and running multiple rooms" href="slurk_multibots.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> slurk
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="slurk_about.html">1. Slurk: What’s this?</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_prerequisites.html">2. Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_gettingstarted.html">3. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_multibots.html">4. Pairing up participants and running multiple rooms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. Layouts and Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#layout-development-in-practice">5.1. Layout development in practice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="slurk_permission.html">6. Security and Permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_bots.html">7. Writing your own bots</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_api.html">8. REST API for slurk</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_deployment.html">9. Deployment of the system</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_amt.html">10. Getting participants from Amazon Mechanical Turk</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">slurk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">5. </span>Layouts and Plugins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/slurk_layouts.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="layouts-and-plugins">
<span id="slurk-layouts"></span><h1><span class="section-number">5. </span>Layouts and Plugins<a class="headerlink" href="#layouts-and-plugins" title="Permalink to this headline">¶</a></h1>
<p>In Slurk you have the possibility to integrate your own layouts.
With layouts it is possible to modify the display area on the right side and specify a stylesheet.</p>
<p>A layout is a JSON file with a top level dictionary with the following keys:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;title&quot;</span></code>: String displayed in the header. If no title is specified, “Slurk” is used.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;subtitle&quot;</span></code>: String displayed under the title.</p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;html&quot;</span></code>: Consists of a list of further dictionaries or strings.</dt><dd><p>Each dictionary represents an HTML node.  Each key in this dictionary corresponds to the attribute in an HTML tag. There are also two predefined tags: <code class="docutils literal notranslate"><span class="pre">&quot;layout-type&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;layout-content&quot;</span></code>. <code class="docutils literal notranslate"><span class="pre">&quot;layout-type&quot;</span></code> corresponds to the name of the node, <code class="docutils literal notranslate"><span class="pre">&quot;layout-content&quot;</span></code> corresponds to the content between the opening and closing tag. For example</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;layout-type&quot;</span><span class="p">:</span> <span class="s2">&quot;span&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layout-content&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;box&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>corresponds to the HTML of <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">id=&quot;box&quot;&gt;Text&lt;/span&gt;</span></code></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;css&quot;</span></code>: A dictionary which is similar to a typical css stylesheet. Example:</dt><dd><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;#image-area&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;align-content&quot;</span><span class="p">:</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span>
    <span class="nt">&quot;margin&quot;</span><span class="p">:</span> <span class="s2">&quot;50px 20px 15px&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;script&quot;</span></code>: Provides the ability to inject a script plugin into the chat. It consists of another dictionary, which
maps different triggers to scripts or a list of scripts. Scripts can either be a predefined one, or can be passed by
link. Example:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;incoming-message&quot;</span><span class="p">:</span> <span class="s2">&quot;display-message&quot;</span><span class="p">,</span>
  <span class="nt">&quot;submit-message&quot;</span><span class="p">:</span> <span class="s2">&quot;send-message&quot;</span><span class="p">,</span>
  <span class="nt">&quot;print-history&quot;</span><span class="p">:</span> <span class="s2">&quot;plain-history&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;external&quot;</span></code>: A list of javascript links to load. Example:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="s2">&quot;https://github.com/OpenVidu/openvidu/releases/download/v2.11.0/openvidu-browser-2.11.0.min.js&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<dl class="docutils">
<dt>Predefined scripts:</dt><dd><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;display-text&quot;</span></code>: Displays texts in the chat as they arrive</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;display-image&quot;</span></code>: Displays images in the chat as they arrive</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;plain-history&quot;</span></code>: Shows messages in the chat, which have arrived before login</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;send-message&quot;</span></code>: Sends text, images, and commands depending on the entered text</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;typing-users&quot;</span></code>: Displays the currently typing users in the <code class="docutils literal notranslate"><span class="pre">#typing</span></code> element</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;ask-reload&quot;</span></code>: A popup asks on page reload, if this is the desired action</li>
</ul>
</dd>
</dl>
<p>These are the currently defined triggers:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;incoming-text&quot;</span></code>: Called when a new message arrives. These are the passed parameters</dt><dd><ul>
<li><code class="docutils literal notranslate"><span class="pre">data.user</span></code>: The user who has sent the message</li>
<li><code class="docutils literal notranslate"><span class="pre">data.timestamp</span></code>: The timestamp of the message</li>
<li><code class="docutils literal notranslate"><span class="pre">data.private</span></code>: A boolean value if this was a direct message or visible to the room</li>
<li><code class="docutils literal notranslate"><span class="pre">data.message</span></code>: The message string of the sent message if any</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;incoming-image&quot;</span></code>: Called when a new message arrives. These are the passed parameters</dt><dd><ul>
<li><code class="docutils literal notranslate"><span class="pre">data.user</span></code>: The user who has sent the message</li>
<li><code class="docutils literal notranslate"><span class="pre">data.timestamp</span></code>: The timestamp of the message</li>
<li><code class="docutils literal notranslate"><span class="pre">data.private</span></code>: A boolean value if this was a direct message or visible to the room</li>
<li><code class="docutils literal notranslate"><span class="pre">data.image</span></code>: The image url of the sent message if any (Either <code class="docutils literal notranslate"><span class="pre">data.message</span></code> or <code class="docutils literal notranslate"><span class="pre">data.image</span></code> are available)</li>
<li><code class="docutils literal notranslate"><span class="pre">data.width</span></code>: The width of the sent image (available if <code class="docutils literal notranslate"><span class="pre">data.image</span></code> is set)</li>
<li><code class="docutils literal notranslate"><span class="pre">data.height</span></code>: The height of the sent image (available if <code class="docutils literal notranslate"><span class="pre">data.image</span></code> is set)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;submit-message&quot;</span></code>: Called when the user hits RETURN on the typing area</dt><dd><ul>
<li><code class="docutils literal notranslate"><span class="pre">text</span></code>: The text which was entered in the typing area</li>
<li><code class="docutils literal notranslate"><span class="pre">current_user</span></code>: The user who just hit RETURN</li>
<li><code class="docutils literal notranslate"><span class="pre">current_timestamp</span></code>: The current timestamp</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;print-history&quot;</span></code>: Triggered when the server sends the history of the chat on joining a room</dt><dd><ul>
<li><code class="docutils literal notranslate"><span class="pre">element.event</span></code>: Type of the event. Either <code class="docutils literal notranslate"><span class="pre">&quot;text&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;command&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;status&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">element.user</span></code>: The user who sent the event</li>
<li><code class="docutils literal notranslate"><span class="pre">element.timestamp</span></code>: The timestamp of the event</li>
<li><code class="docutils literal notranslate"><span class="pre">element.message</span></code> (<code class="docutils literal notranslate"><span class="pre">&quot;text&quot;</span></code>): The message of the text event</li>
<li><code class="docutils literal notranslate"><span class="pre">element.receiver_id</span></code> (<code class="docutils literal notranslate"><span class="pre">&quot;text&quot;</span></code>, Optional): The receiver id, if it was a private message</li>
<li><code class="docutils literal notranslate"><span class="pre">element.command</span></code> (<code class="docutils literal notranslate"><span class="pre">&quot;command&quot;</span></code>): The command which was executed</li>
</ul>
</dd>
</dl>
</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;document-ready&quot;</span></code>: Inserted into the JQuery <code class="docutils literal notranslate"><span class="pre">$(document).ready</span></code> function</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;plain&quot;</span></code>: Inserted as plain script into the chat</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;typing-users&quot;</span></code>: Triggered when a user starts or stops typing</dt><dd><ul>
<li><code class="docutils literal notranslate"><span class="pre">users</span></code>: A map of currently typing users, with its id as the key</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Additionally, some functions are guaranteed to exist:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">display_message(sender,</span> <span class="pre">time,</span> <span class="pre">message,</span> <span class="pre">privateMessage)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">display_image(sender,</span> <span class="pre">time,</span> <span class="pre">url,</span> <span class="pre">width,</span> <span class="pre">height,</span> <span class="pre">privateMessage)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">display_info(time,</span> <span class="pre">message)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">submit_text(text)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">submit_image(url,</span> <span class="pre">width,</span> <span class="pre">height)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">submit_command(parameter)</span></code></li>
</ul>
<div class="section" id="layout-development-in-practice">
<h2><span class="section-number">5.1. </span>Layout development in practice<a class="headerlink" href="#layout-development-in-practice" title="Permalink to this headline">¶</a></h2>
<p>Creating and adding your own layout to Slurk allows you to customize the design and functionality of the waiting and
chat room without changing the static HTML and CSS files. It is possible to define and format new tags or to work with
existing ones.</p>
<p>The following steps demonstrate how to build your own layout for an example waiting room used by the concierge bot.</p>
<p>The waiting room is supposed to have a custom title, an image on the right, and a blue theme:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Waiting Room&quot;</span><span class="p">,</span>
  <span class="nt">&quot;subtitle&quot;</span><span class="p">:</span> <span class="s2">&quot;waiting for other players...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;html&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;layout-type&quot;</span><span class="p">:</span> <span class="s2">&quot;div&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;image-area&quot;</span><span class="p">,</span>
      <span class="nt">&quot;layout-content&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;layout-type&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;current-image&quot;</span><span class="p">,</span>
          <span class="nt">&quot;src&quot;</span><span class="p">:</span> <span class="s2">&quot;https://media.giphy.com/media/tXL4FHPSnVJ0A/giphy.gif&quot;</span><span class="p">,</span>
          <span class="nt">&quot;width&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
          <span class="nt">&quot;height&quot;</span><span class="p">:</span> <span class="mi">400</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;css&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;header, footer&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;background&quot;</span><span class="p">:</span> <span class="s2">&quot;#115E91&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;#image-area&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;align-content&quot;</span><span class="p">:</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span>
      <span class="nt">&quot;margin&quot;</span><span class="p">:</span> <span class="s2">&quot;50px 20px 15px&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;incoming-text&quot;</span><span class="p">:</span> <span class="s2">&quot;display-text&quot;</span><span class="p">,</span>
    <span class="nt">&quot;incoming-image&quot;</span><span class="p">:</span> <span class="s2">&quot;display-image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;submit-message&quot;</span><span class="p">:</span> <span class="s2">&quot;send-message&quot;</span><span class="p">,</span>
    <span class="nt">&quot;print-history&quot;</span><span class="p">:</span> <span class="s2">&quot;plain-history&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="slurk_permission.html" class="btn btn-neutral float-right" title="6. Security and Permissions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="slurk_multibots.html" class="btn btn-neutral float-left" title="4. Pairing up participants and running multiple rooms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2018 DSG Bielefeld, 2019 CL Potsdam.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>