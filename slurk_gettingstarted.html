

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Getting Started &mdash; slurk 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Pairing up participants and running multiple rooms" href="slurk_multibots.html" />
    <link rel="prev" title="1. Slurk: What’s this?" href="slurk_about.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> slurk
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="slurk_about.html">1. Slurk: What’s this?</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-the-documentation">2.1. Building the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hello-world-a-basic-test-of-the-server">2.2. “Hello World”: A basic test of the server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hello-world-hello-other-browser-testing-with-two-browsers">2.3. “Hello World” – “Hello Other Browser”: Testing with two browsers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chatting-with-a-bot">2.4. Chatting with a bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examining-the-log-files">2.5. Examining the log files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="slurk_multibots.html">3. Pairing up participants and running multiple rooms</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_layouts.html">4. Layouts and Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_bots.html">5. Writing your own bots</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_api.html">6. REST API for slurk</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_deployment.html">7. Deployment of the system</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_amt.html">8. Getting participants from Amazon Mechanical Turk</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">slurk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><span class="section-number">2. </span>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/slurk_gettingstarted.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<span id="slurk-gettingstarted"></span><h1><span class="section-number">2. </span>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="building-the-documentation">
<h2><span class="section-number">2.1. </span>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>In order to build the documentation yourself, you additionally need the packages <em>sphinx</em> and <em>sphinx_rtd_theme</em>. Then
you can create the documentation in the <em>docs</em> folder:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip install sphinx sphinx_rtd_theme
<span class="nb">cd</span> docs
make html
</pre></div>
</div>
<p>The generated documentation can then be found at <em>docs/_build/</em></p>
</div>
<div class="section" id="hello-world-a-basic-test-of-the-server">
<h2><span class="section-number">2.2. </span>“Hello World”: A basic test of the server<a class="headerlink" href="#hello-world-a-basic-test-of-the-server" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to use system is using Docker. For this, <code class="docutils literal notranslate"><span class="pre">docker</span></code> is recommended:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install docker
</pre></div>
</div>
<p>In order to run the server on port 80 and store the container id, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">SLURK_SERVER_ID</span><span class="o">=</span><span class="k">$(</span>docker run -p <span class="m">80</span>:5000 -e <span class="nv">SECRET_KEY</span><span class="o">=</span>your-key -d slurk/server<span class="k">)</span>
</pre></div>
</div>
<p>Read the admin token from the logs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">ADMIN_TOKEN</span><span class="o">=</span><span class="k">$(</span>docker logs <span class="nv">$SLURK_SERVER_ID</span> <span class="m">2</span>&gt; /dev/null <span class="p">|</span> sed -n <span class="s1">&#39;/admin token:/{n;p;}&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Verify you have a proper UUID token:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">echo</span> <span class="nv">$ADMIN_TOKEN</span>
b8b88080-b8d1-4eb2-af90-dccf7ece3d82
</pre></div>
</div>
<p>Create a room as landing page for our new token:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ curl -X POST <span class="se">\</span>
       -H <span class="s2">&quot;Authorization: Token </span><span class="nv">$ADMIN_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
       -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
       -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
       -d <span class="s1">&#39;{&quot;name&quot;: &quot;test_room&quot;, &quot;label&quot;: &quot;Test Room&quot;}&#39;</span> <span class="se">\</span>
       localhost/api/v2/room
<span class="o">{</span>
  <span class="s2">&quot;current_users&quot;</span>: <span class="o">{}</span>,
  <span class="s2">&quot;label&quot;</span>: <span class="s2">&quot;Test Room&quot;</span>,
  <span class="s2">&quot;layout&quot;</span>: null,
  <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;test_room&quot;</span>,
  <span class="s2">&quot;read_only&quot;</span>: false,
  <span class="s2">&quot;show_latency&quot;</span>: true,
  <span class="s2">&quot;show_users&quot;</span>: true,
  <span class="s2">&quot;static&quot;</span>: false,
  <span class="s2">&quot;users&quot;</span>: <span class="o">{}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Generate a new token for the clients (<code class="docutils literal notranslate"><span class="pre">sed</span></code> removes quotation from JSON-string):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ curl -X POST <span class="se">\</span>
       -H <span class="s2">&quot;Authorization: Token </span><span class="nv">$ADMIN_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
       -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
       -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
       -d <span class="s1">&#39;{&quot;room&quot;: &quot;test_room&quot;, &quot;message_text&quot;: true}&#39;</span> <span class="se">\</span>
       localhost/api/v2/token <span class="p">|</span> sed <span class="s1">&#39;s/^&quot;\(.*\)&quot;$/\1/&#39;</span>
9e6f53ae-2da7-4c53-92c7-ec43f8fa50cd
</pre></div>
</div>
<p>for a list of possible parameters see <a class="reference internal" href="slurk_api.html#slurk-api"><span class="std std-ref">REST API for slurk</span></a></p>
<p>Visit <a class="reference external" href="http://localhost" target="_blank">http://localhost</a> and enter whatever Name you like and this token, and click “enter chatroom”.</p>
<p>This should transport you to the chat interface, where you then can happily type messages which no one will see (apart from you, that is).</p>
<div class="figure align-center" id="id1">
<span id="screenshot-void"></span><a class="reference internal image-reference" href="_images/single_user.png"><img alt="_images/single_user.png" src="_images/single_user.png" style="width: 639.6px; height: 424.8px;" /></a>
<p class="caption"><span class="caption-number">Fig. 2.1 </span><span class="caption-text">A single user talking to no one in particular</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>This has confirmed that the server is working correctly, but so far this hasn’t really been very exciting. So we move on.</p>
</div>
<div class="section" id="hello-world-hello-other-browser-testing-with-two-browsers">
<span id="twobrowsers"></span><h2><span class="section-number">2.3. </span>“Hello World” – “Hello Other Browser”: Testing with two browsers<a class="headerlink" href="#hello-world-hello-other-browser-testing-with-two-browsers" title="Permalink to this headline">¶</a></h2>
<p>Run the steps from the previous section (starting the server, creating a token and logging in), and then create an
addtional token and, <strong>from a different web browser or in a private tab</strong>, log in with that token. You should now see
both identities in the respective chat windows, and you should be able to talk with your two selves across these
browsers. Hurray!</p>
<p>(If your machine is set up in the right way [that is, the machine that is localhost is accessible from your network],
this might work across machines, and so you can have a chat with an actual different person.)</p>
<p>This has demonstrated the very basic capabilities – providing a chat environment –, but so far there hasn’t been any
use made of the display window. Let’s change that by inviting a bot into our chat room.</p>
</div>
<div class="section" id="chatting-with-a-bot">
<h2><span class="section-number">2.4. </span>Chatting with a bot<a class="headerlink" href="#chatting-with-a-bot" title="Permalink to this headline">¶</a></h2>
<p>Without additional environment variables, the server uses an in-memory database and resets on every restart of the
server. Now let’s restart the server to reset the database. Before we log onto the server in the way described above,
let us create a bot user and let it log on first. Create two tokens as described above, one for the user and one for
the bot.</p>
<p>There are Docker containers for all example bots. To run these bots using docker, type</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -e <span class="nv">TOKEN</span><span class="o">=</span><span class="nv">$BOT_TOKEN</span> --net<span class="o">=</span><span class="s2">&quot;host&quot;</span> slurk/echo-bot
</pre></div>
</div>
<p>You may provide additional environment variables, too:
- <code class="docutils literal notranslate"><span class="pre">CHAT_HOST</span></code>: The host address (must include the protocol like “<a class="reference external" href="https://" target="_blank">https://</a>”)
- <code class="docutils literal notranslate"><span class="pre">CHAT_PORT</span></code>: The port of the host</p>
<p>Note, that you have to pass <code class="docutils literal notranslate"><span class="pre">--net=&quot;host&quot;</span></code> to docker in order to make <code class="docutils literal notranslate"><span class="pre">http://localhost</span></code> working.</p>
</div>
<div class="section" id="examining-the-log-files">
<h2><span class="section-number">2.5. </span>Examining the log files<a class="headerlink" href="#examining-the-log-files" title="Permalink to this headline">¶</a></h2>
<p>The point of all this, however, is not just to make interaction <em>possible</em>, it is to <em>record</em> these interactions to be
able to later study them or train models on them.</p>
<p>In order to read the logs, we use the API again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ curl -X GET <span class="se">\</span>
       -H <span class="s2">&quot;Authorization: Token </span><span class="nv">$ADMIN_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
       -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
       -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
       localhost/api/v2/room/test_room/logs
</pre></div>
</div>
<p>The returned data contains, as a JSON list, most of the
events that the server handled, including all the messages that were sent. This should contain the information that you
need for your particular purposes.</p>
<p>This concludes the quick start. We now can be reasonably confident that the setup is working on your machine; and you
also got a first introduction to the basic concepts. But what we have seen so far would only allow us to run a single
room at a time. That may already be all you want if you conduct experiments locally with participants that you bring
into the lab. If you want to make use of crowdsourcing, though, you will want to be able to automatically pair up
participants and create task rooms for each pair. This will be explained in the next section.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="slurk_multibots.html" class="btn btn-neutral float-right" title="3. Pairing up participants and running multiple rooms" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="slurk_about.html" class="btn btn-neutral float-left" title="1. Slurk: What’s this?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018 DSG Bielefeld, 2019 CL Potsdam

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>