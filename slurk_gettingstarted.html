<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Getting Started &mdash; slurk 2.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Pairing up participants and running multiple rooms" href="slurk_multibots.html" />
    <link rel="prev" title="2. Prerequisites" href="slurk_prerequisites.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> slurk
          </a>
              <div class="version">
                2.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="slurk_about.html">1. Slurk: What’s this?</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_prerequisites.html">2. Prerequisites</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hello-world-a-basic-test-of-the-server">3.1. “Hello World”: A basic test of the server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hello-world-hello-other-browser-testing-with-two-browsers">3.2. “Hello World” – “Hello Other Browser”: Testing with two browsers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chatting-with-a-bot">3.3. Chatting with a bot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examining-the-log-files">3.4. Examining the log files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="slurk_multibots.html">4. Pairing up participants and running multiple rooms</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_layouts.html">5. Layouts and Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_bots.html">6. Writing your own bots</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_bots_events.html">7. Bot related Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_api.html">8. REST API for slurk</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_deployment.html">9. Deployment of the system</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurk_amt.html">10. Getting participants from Amazon Mechanical Turk</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">slurk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">3. </span>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/slurk_gettingstarted.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="getting-started">
<span id="slurk-gettingstarted"></span><h1><span class="section-number">3. </span>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline"></a></h1>
<div class="section" id="hello-world-a-basic-test-of-the-server">
<h2><span class="section-number">3.1. </span>“Hello World”: A basic test of the server<a class="headerlink" href="#hello-world-a-basic-test-of-the-server" title="Permalink to this headline"></a></h2>
<p>First, spin up a slurk server. Either use the server from <a class="reference internal" href="slurk_prerequisites.html#slurk-prerequisites"><span class="std std-ref">Prerequisites</span></a> or see <a class="reference internal" href="slurk_deployment.html#slurk-deployment"><span class="std std-ref">Deployment of the system</span></a> for more information on this.</p>
<p>Next, the admin token is needed. If you are running slurk from docker, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">SLURK_TOKEN</span><span class="o">=</span><span class="k">$(</span>scripts/read_admin_token.sh<span class="k">)</span>
$ <span class="nb">echo</span> <span class="nv">$SLURK_TOKEN</span>
<span class="m">01234567</span>-89ab-cdef-0123-456789abcdef
</pre></div>
</div>
<p>Otherwise, assign it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">SLURK_TOKEN</span><span class="o">=</span><span class="m">01234567</span>-89ab-cdef-0123-456789abcdef
</pre></div>
</div>
<p>The token is exported so subsequent scripts can read the token. All scripts are using the <a class="reference internal" href="slurk_api.html#slurk-api"><span class="std std-ref">REST API for slurk</span></a> internally.</p>
<p>Create a room as the landing page for our new token. In order to create a room,
we need a layout for the room. We use a default layout provided by slurk:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ scripts/create_layout.sh examples/simple_layout.json
</pre></div>
</div>
<p>This will return the layout with all its settings, only the id is needed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">LAYOUT_ID</span><span class="o">=</span><span class="k">$(</span>scripts/create_layout.sh examples/simple_layout.json <span class="p">|</span> jq .id<span class="k">)</span>
$ <span class="nb">echo</span> <span class="nv">$LAYOUT_ID</span>
<span class="m">2</span>
</pre></div>
</div>
<p>With the layout provided, we can create the actual room:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">ROOM_ID</span><span class="o">=</span><span class="k">$(</span>scripts/create_room.sh <span class="nv">$LAYOUT_ID</span> <span class="p">|</span> jq .id<span class="k">)</span>
$ <span class="nb">echo</span> <span class="nv">$ROOM_ID</span>
<span class="m">1</span>
</pre></div>
</div>
<p>To log into the room, a token has to be generated:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>scripts/create_room_token.sh <span class="nv">$ROOM_ID</span> examples/message_permissions.json <span class="p">|</span> jq -r .id<span class="k">)</span>
$ <span class="nb">echo</span> <span class="nv">$TOKEN</span>
fedcba98-7654-3210-fedc-ba9876543210
</pre></div>
</div>
<p>Now visit your server (e.g. <a class="reference external" href="http://localhost:5000" target="_blank">http://localhost:5000</a>) and enter whatever name you like and the token
you just generated, and click “enter chatroom”.</p>
<p>This should transport you to the chat interface, where you then can
happily type messages which no one will see (apart from you, that is).</p>
<div class="figure align-center" id="id2">
<span id="screenshot-void"></span><a class="reference internal image-reference" href="_images/single_user.png"><img alt="_images/single_user.png" src="_images/single_user.png" style="width: 476.5px; height: 245.75px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.1 </span><span class="caption-text">A single user talking to no one in particular</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</div>
<p>This has confirmed that the server is working correctly, but so far
this hasn’t really been very exciting. So we move on.</p>
</div>
<div class="section" id="hello-world-hello-other-browser-testing-with-two-browsers">
<span id="twobrowsers"></span><h2><span class="section-number">3.2. </span>“Hello World” – “Hello Other Browser”: Testing with two browsers<a class="headerlink" href="#hello-world-hello-other-browser-testing-with-two-browsers" title="Permalink to this headline"></a></h2>
<p>Run the steps from the previous section (starting the server, creating
a token and logging in), and then create an additional token by
running the create_token script with the same parameters again. <strong>From
a different web browser or in a private tab</strong>, log in with that
token. You should now see both identities in the respective chat
windows, and you should be able to talk with your two selves across
these browsers. Hurray!</p>
<p>(If your machine is set up in the right way [that is, the machine that
is localhost is accessible from your network], this might work across
machines, and so you can have a chat with an actual distinct person.)</p>
<p>This has demonstrated the very basic capabilities – providing a chat
environment – but so far there has been no use made of the display
window. Let’s change that by inviting a bot into our chat room.</p>
</div>
<div class="section" id="chatting-with-a-bot">
<h2><span class="section-number">3.3. </span>Chatting with a bot<a class="headerlink" href="#chatting-with-a-bot" title="Permalink to this headline"></a></h2>
<p>Without additional environment variables, the server uses an in-memory
database and resets on every restart of the server. If you restarted the
server, make sure you have created the layout and the room.</p>
<p>For the bot, more permissions are needed. Create a file where the
permissions are set:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat bot-permissions.json
<span class="o">{</span>
    <span class="s2">&quot;api&quot;</span>: true,
    <span class="s2">&quot;send_message&quot;</span>: true,
    <span class="s2">&quot;send_image&quot;</span>: true,
    <span class="s2">&quot;send_privately&quot;</span>: <span class="nb">true</span>
 <span class="o">}</span>
</pre></div>
</div>
<p>Now create the token and a user for the bot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">BOT_TOKEN</span><span class="o">=</span><span class="k">$(</span>scripts/create_room_token.sh <span class="nv">$ROOM_ID</span> bot-permissions.json <span class="p">|</span> jq -r .id<span class="k">)</span>
$ <span class="nb">echo</span> <span class="nv">$BOT_TOKEN</span>
<span class="m">45670123</span>-cdef-89ab-4567-012389abcdef
$ <span class="nv">BOT_USER</span><span class="o">=</span><span class="k">$(</span>scripts/create_user.sh <span class="s1">&#39;Echo Bot&#39;</span> <span class="nv">$BOT_TOKEN</span> <span class="p">|</span> jq -r .id<span class="k">)</span>
$ <span class="nb">echo</span> <span class="nv">$BOT_USER</span>
<span class="m">2</span>
</pre></div>
</div>
<p>There are several bots available at <a class="reference external" href="https://github.com/clp-research/slurk-bots" target="_blank">GitHub</a>,
in our example the echo-bot is used. Start the bot with the provided token</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -e <span class="nv">SLURK_TOKEN</span><span class="o">=</span><span class="nv">$BOT_TOKEN</span> -e <span class="nv">SLURK_USER</span><span class="o">=</span><span class="nv">$BOT_USER</span> -e <span class="nv">SLURK_PORT</span><span class="o">=</span><span class="m">5000</span> --net<span class="o">=</span>host slurk/echo-bot
</pre></div>
</div>
<p>After the bot has logged in, you can chat with yourself.</p>
<div class="figure align-center" id="id3">
<span id="id1"></span><a class="reference internal image-reference" href="_images/echo-bot.png"><img alt="_images/echo-bot.png" src="_images/echo-bot.png" style="width: 476.0px; height: 245.75px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.2 </span><span class="caption-text">Chatting with myself</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</div>
</div>
<div class="section" id="examining-the-log-files">
<h2><span class="section-number">3.4. </span>Examining the log files<a class="headerlink" href="#examining-the-log-files" title="Permalink to this headline"></a></h2>
<p>The point of all this, however, is not just to make interaction
<em>possible</em>, it is to <em>record</em> these interactions to be able to later
study them or train models on them.</p>
<p>In order to read the logs for our room, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ scripts/get_logs.sh <span class="nv">$ROOM_ID</span> <span class="p">|</span> jq
</pre></div>
</div>
<p>The returned data contains, as a JSON list, most of the events that
the server handled, including all the messages that were sent. This
should contain the information that you need for your particular
purposes.</p>
<p>This concludes the quick start. We now can be reasonably confident
that the setup is working on your machine; you also got a first
introduction to the basic concepts. But what we have seen so far would
only allow us to run a single room at a time. That may already be all
you want if you conduct experiments locally with participants that you
bring into the lab. If you want to make use of crowdsourcing, though,
you will want to be able to automatically pair up participants and
create task rooms for each pair. This will be explained in the next
section.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="slurk_prerequisites.html" class="btn btn-neutral float-left" title="2. Prerequisites" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="slurk_multibots.html" class="btn btn-neutral float-right" title="4. Pairing up participants and running multiple rooms" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2018 DSG Bielefeld, 2019 CL Potsdam.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>